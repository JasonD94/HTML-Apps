<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		
		<!-- CSS files -->
		<link rel="stylesheet" type="text/css" href="water_testing.css" />
		
		<!-- JavaScript files -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">
		</script>
		<script src="water_testing.js"></script>

		<title>Water Testing App</title>
	</head>
	<body> 
		<h1>Water Testing App</h1>
		<p>
			This app lets you collect water samples and analysis the results
			using iSENSE.
			<br/>
			All data is posted to project on iSENSE called "Lab Tests"
		</p>
		
		<!-- 	This part uses HTML 5 forms to collect data from the user. 
				The javascript file bh.js takes this data and sends it the 
				iSENSE website. -->
		<form name="boathouse">
			<table>
				<tr>
					<td align="right">Data set name:</td>
					<td align="left">
						<input type="letter" name="dataset" id="dataset_name">
					</td>
				</tr>
		
				<tr>
					<td align="right">Temperature:</td>
					<td align="left">
						<input  type="number" name="Temperature" id='tp' 
								min="0" max="35" step=".5" value="5">
					</td>
				</tr>
		
				<tr>
					<td align="right">pH:</td>
					<td align="left">
						<input 	type="number" name="pH" id ='ph' 
								min="0" max="10" step=".1" value="5">
					</td>

				<tr>
					<td align="right">Dissolved Oxygen:</td>
					<td align="left">
						<input 	type="number" name="Oxygen" id='o2' 
								min="0" max="10" step=".1" value="5">
					</td>
				</tr>
		
				<tr>
					<td align="right">Phosphates:</td>
					<td align="left">
						<input  type="number" name="Phosphates" id='phos' 
								min="0" max="10" step=".1" value="5">
					</td>
				</tr>
			</table>
		</form>	

		<p>
			<input type="button" id='sub' onclick="get_GPS();submitter()" 
			value="Submit to iSENSE.">
		</p>
		
		<p><span id="loc">Latitude & longitude will appear here.</span></p>	
		<p><span id="The_URL">
			The URL to the project that you contributed to will appear here!
		</span></p>
		
		<!-- This script will get the GPS coordinates of the user. -->
		<script>
		function get_GPS() {
			var location = document.getElementById("loc");
			
			var options = {
				enableHighAccuracy: true,
				timeout: 5000,
				maximumAge: 0
			};
			
			if(navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showSuccess, showError, options);
			}
			else {
				location.innerHTML = "Geolocation is not supported by this browser.";
			}
			
			function showSuccess(position) {
				// We can get the location!
				lat = position.coords.latitude;
				long = position.coords.longitude;
				location.innerHTML = "Latitude: " + position.coords.latitude + 								 		 "   Longitude: " + position.coords.longitude;

				console.log("Success?");
				console.log("LAT: " + position.coords.latitude + "LONG: " + position.coords.longitude);
			}
			
			function showError(error) {
				// Location isn't available.
				switch(error.code) {
					case error.PERMISSION_DENIED:
						location.innerHTML = "User denied the request for Geolocation.";
						break;
					case error.POSITION_UNAVAILABLE:
						location.innerHTML = "Location information is unavailable.";
						break;
					case error.TIMEOUT:
						location.innerHTML = "The request to get user location timed out.";
						break;
					case error.UNKNOWN_ERROR:
						location.innerHTML = "An unknown error occurred.";
						break;
				}
			}

		}
		
		/*
		function get_GPS() {
			var location = document.getElementById("loc");
		
			var options = {
				enableHighAccuracy: false,
				timeout: 5000,
				maximumAge: 0
			};

			function success(pos) {
				var crd = pos.coords;
				
				lat = position.coords.latitude;
				long = position.coords.longitude;
				location.innerHTML = "Latitude: " + position.coords.latitude + 								 
									 "   Longitude: " + position.coords.longitude;

				console.log('Your current position is:');
				console.log('Latitude : ' + crd.latitude);
				console.log('Longitude: ' + crd.longitude);
				console.log('More or less ' + crd.accuracy + ' meters.');
			};

			function error(err) {
				location.innerHTML = "ERROR: " + err.code + " - " + err.message;
				console.warn('ERROR(' + err.code + '): ' + err.message);
			};

			navigator.geolocation.getCurrentPosition(success, error, options);
		}*/
		/*
		function get_GPS() {
			var location = document.getElementById("loc");
		
			if("geolocation" in navigator) {
				// We can get the location!
				navigator.geolocation.getCurrentPosition(function(position) { 
					lat = position.coords.latitude;
					long = position.coords.longitude;
					location.innerHTML = "Latitude: " + position.coords.latitude + 								 
									 "   Longitude: " + position.coords.longitude;
				}, function(error) {
				// Location isn't available.
				location.innerHTML = "Geolocation is not supported by this browser.";
				});
			} else {
				// Location isn't available.
				location.innerHTML = "Geolocation is not supported by this browser.";
			}
		
			console.log("Latitude is: " + lat);
			console.log("Longitude is: " + long);
		}*/
		</script>
		
		<p><a href="API_Index.html">
			Return to the previous page</a></p>
	</body>
</html>
